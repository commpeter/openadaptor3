<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<!--
    This adaptor does the following...
    
      * reads data from stdin
      * publishes data to tibco rendezvous
    
    It is designed to illustrate the basic structure of an adaptor that processes
    data by publishing onto rendezvous.

    Run it like this...
    
      java org.oa3.spring.SpringApplication -config publisher.xml -bean Adaptor
    
    You need the following in your classpath
  
      lib
      lib/openadaptor.jar
      lib/openadaptor-spring.jar
      lib/openadaptor-depends.jar
      tibrvj.jar (this is not distributed with openadaptor)
    
    tibrvj calls the native rendezvous installation, so this needs to be installed
    and the libraries need to be in your PATH / LD_LIBRARY_PATH.
     
    Once it is running you need to type some data into the command line. To
    verify that this is working you need to be running the corresponding
    subscriber example or tibrvlisten.
-->

<beans>
  
  <bean id="Adaptor" class="org.oa3.core.adaptor.Adaptor">
    <property name="pipeline">
      <list>
        <ref bean="Reader"/>
        <ref bean="Writer"/>
      </list>
    </property>
  </bean>

  <bean id="Reader" class="org.oa3.auxil.connector.iostream.reader.StreamReadConnector">
    <property name="streamReader">
      <bean class="org.oa3.auxil.connector.iostream.reader.FileReader"/>
    </property>
    <property name="recordReader">
      <bean class="org.oa3.auxil.connector.iostream.reader.StringRecordReader"/>
    </property>
  </bean>

  <!-- This defines rv connection -->
  <bean id="TibrvConnection" class="org.oa3.thirdparty.tibco.TibrvConnection">
    <property name="service" value=""/>  
    <property name="network" value=""/>  
    <property name="daemon" value=""/>  
  </bean>
  
  <!-- this is a write connector that publishes -->
  <bean id="Writer" class="org.oa3.thirdparty.tibco.TibrvWriteConnector">
    <property name="connection" ref="TibrvConnection"/>
    <property name="subject" value="test"/>
  </bean>
  
</beans>