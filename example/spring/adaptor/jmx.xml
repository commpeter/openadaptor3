<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<!--
    Illustrates how to run a jmx MBeanServer. Any other bean in the config that is an "MBean" 
    will automatically be registered. The adaptor will be registered and this example includes 
    a utility bean that exposes useful methods for viewing JVM properties.
    
    This example specifies the MBeanServer bean that comes with openadaptor (uses the sun 
    reference implementation and automatically runs a http adaptor which you can browse 
    at http://localhost:8082).
    
    The actual adaptor, simply reads stdin and writes to stdout.
-->

<beans>
  
  <!-- embed this in your config to expose jmx interface via http & rmi -->
	<bean class="org.openadaptor.core.jmx.MBeanServer">
    <constructor-arg value="8082"/>
  </bean>
  
  <!-- embed this in your config to expose useful management bean -->
  <bean id="SystemUtil" class="org.openadaptor.util.SystemUtil"/>
  
  <!-- embed this in your config to expose log4j management -->
  <bean id="LogAdmin" class="org.openadaptor.thirdparty.log4j.LogAdmin"/>
  
  <bean id="Adaptor" class="org.openadaptor.core.adaptor.Adaptor">
    <property name="messageProcessor">
      <bean class="org.openadaptor.core.router.Pipeline">
        <property name="processors">
          <list>
            <ref bean="ReadConnector"/>
            <ref bean="WriteConnector"/>
          </list>
        </property>
      </bean>
    </property>  
  </bean>

  <bean id="ReadConnector" class="org.openadaptor.auxil.connector.iostream.reader.FileReadConnector"/>
  
  <bean id="WriteConnector" class="org.openadaptor.auxil.connector.iostream.writer.FileWriteConnector"/>
  
</beans>